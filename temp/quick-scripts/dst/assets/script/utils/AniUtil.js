
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/utils/AniUtil.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e51ebQiMxlHk5J6Gc5jaRvq', 'AniUtil');
// script/utils/AniUtil.ts

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AniUtil = void 0;
var SpriteToHome_1 = require("../common/effect/SpriteToHome");
var UIManager_1 = require("../game/common/UIManager");
var GameUtils_1 = require("../game/GameUtils");
var Utils_1 = require("./Utils");
var AniUtil = /** @class */ (function () {
    function AniUtil() {
    }
    AniUtil.JumpTo2 = function (player, wPosOfTarget, top, scaleFrom, scaleTo, effboom, end) {
        if (top === void 0) { top = 300; }
        if (scaleFrom === void 0) { scaleFrom = 1; }
        if (scaleTo === void 0) { scaleTo = 1; }
        if (effboom === void 0) { effboom = false; }
        var wPosOfPlayer = player.convertToWorldSpaceAR(cc.v2(0, 0));
        var wPosOfStart = cc.v2(wPosOfPlayer.x, wPosOfTarget.y);
        var skin_x = new cc.Node("skin_x");
        skin_x.position = wPosOfStart;
        UIManager_1.ui.addEffectAR(skin_x);
        var skin_y = new cc.Node("skin_y");
        skin_y.position = cc.v2(0, wPosOfPlayer.y - wPosOfTarget.y);
        skin_y.parent = skin_x;
        var cloneIcon = cc.instantiate(player);
        cloneIcon.active = true;
        cloneIcon.scale = scaleFrom;
        cloneIcon.position = cc.v2(0, 0);
        cloneIcon.parent = skin_y;
        var step = 3;
        var tryRemoveClone = function () {
            if (--step <= 0) {
                end && end();
                if (effboom) {
                    GameUtils_1.GameUtils.addEffBoom(wPosOfTarget);
                }
                Utils_1.Utils.removeNode(skin_x);
            }
        };
        var tx = skin_x.x + (wPosOfTarget.x - wPosOfStart.x);
        var ty = skin_y.y < 0 ? top : skin_y.y + top; //起点位置与终点位置谁高谁低
        cc.tween(skin_x).to(0.5, { x: tx })
            .call(function () {
            tryRemoveClone();
        })
            .start();
        cc.tween(skin_y)
            .to(0.25, { y: ty }, { easing: cc.easing.sineOut })
            .to(0.25, { y: 0 }, { easing: cc.easing.sineIn })
            .call(function () {
            tryRemoveClone();
        }).start();
        cc.tween(cloneIcon)
            .to(0.5, { scale: scaleTo })
            // .to(0.3, { scale: scaleFrom })
            .call(function () {
            tryRemoveClone();
        })
            .start();
    };
    AniUtil.JumpTo = function (player, wPosOfTarget, scale, soundEffcet, easingBack) {
        if (scale === void 0) { scale = 1; }
        if (easingBack === void 0) { easingBack = false; }
        var wPosOfPlayer = player.convertToWorldSpaceAR(cc.v2(0, 0));
        var wPosOfStart = cc.v2(wPosOfPlayer.x, wPosOfTarget.y);
        var cloneIcon = cc.instantiate(player);
        cloneIcon.position = cc.v2(0, wPosOfPlayer.y - wPosOfTarget.y);
        cloneIcon.scale = scale;
        var skin = new cc.Node("skin");
        skin.addChild(cloneIcon);
        skin.position = wPosOfStart;
        UIManager_1.ui.addEffectAR(skin);
        var step = 2;
        var tryRemoveClone = function () {
            if (--step <= 0) {
                soundEffcet && soundEffcet();
                skin.removeFromParent();
            }
        };
        var tx = skin.x + (wPosOfTarget.x - wPosOfStart.x);
        var ty = cloneIcon.y < 0 ? 300 : cloneIcon.y + 300; //起点位置与终点位置谁高谁低
        cc.tween(skin).to(0.6, { x: tx })
            .call(function () {
            tryRemoveClone();
        })
            .start();
        if (easingBack) {
            cc.tween(cloneIcon)
                .to(0.3, { y: ty }, { easing: cc.easing.sineOut })
                .to(0.3, { y: -50, scale: 1 }, { easing: cc.easing.sineIn })
                .to(0.2, { y: 10, scale: 1 }, { easing: cc.easing.sineOut })
                .to(0.15, { y: 0, scale: 1 }, { easing: cc.easing.sineOut })
                .call(function () {
                tryRemoveClone();
            })
                .start();
        }
        else {
            cc.tween(cloneIcon)
                .to(0.3, { y: ty }, { easing: cc.easing.sineOut })
                .to(0.3, { y: 0, scale: 1 }, { easing: cc.easing.sineIn })
                .call(function () {
                tryRemoveClone();
            })
                .start();
        }
    };
    /**
   * 收获金币或钻石的特效
   * @param spriteFrames
   * @param targetNode
   */
    AniUtil.createEffectSpriteHome = function (startNode, targetNode, spriteFrames, callback, num, scale) {
        if (num === void 0) { num = 5; }
        if (scale === void 0) { scale = 1; }
        var effNum = num; //Utils.randomInt(num, num * 2);
        var startBattleWorldPos = startNode.convertToWorldSpaceAR(cc.v2(0, 0));
        var worldEndPos = targetNode.convertToWorldSpaceAR(new cc.Vec2(0, 0));
        for (var i = 0; i < effNum; i++) {
            var time = Utils_1.Utils.randomInt(0, 300);
            setTimeout(function () {
                var index = Utils_1.Utils.randomInt(0, spriteFrames.length);
                var frame = spriteFrames[index];
                SpriteToHome_1.default.create(frame, cc.v2(startBattleWorldPos.x, startBattleWorldPos.y), worldEndPos, false, callback, scale);
            }, time);
        }
    };
    // /**
    //  * 入库的金币
    //  * @param startNode 起始点
    //  */
    // public static effectCollectCoins(startNode: cc.Node,targetNode:cc.Node) {
    //     if (!startNode) {
    //         // startNode = new cc.Node();
    //         // startNode.x = 0;
    //         // startNode.y = 0;
    //         // ui.node_effect.addChild(startNode);
    //         // this.createEffectSpriteHome(startNode, UIManager.instance.topResView.icon_coin, UIManager.instance.spriteFramesManager.coins, () => {
    //         // });
    //         // startNode.removeFromParent();
    //     } else {                    
    //         let frames = [startNode.getComponent(cc.Sprite).spriteFrame];
    //         this.createEffectSpriteHome(startNode, targetNode, frames, () => {
    //         });
    //     }
    //     setTimeout(() => {
    //         Utils.PlayCoinsFlySound(3);
    //     }, 1000);
    // }
    //     /**
    //      * 入库的钻石
    //      * @param startNode 起始点
    //      */
    //     public static effectCollectDiamond(startNode: cc.Node) {
    //         if (!startNode) {
    //             startNode = new cc.Node();
    //             startNode.x = 0;
    //             startNode.y = 0;
    //             UIManager.instance.node_effect.addChild(startNode);
    //             this.createEffectSpriteHome(startNode, UIManager.instance.topResView.icon_diamond, UIManager.instance.spriteFramesManager.diamonds, () => {
    //                 //播放钻石入库音效
    //             });
    //             startNode.removeFromParent();
    //         } else {
    //             this.createEffectSpriteHome(startNode, UIManager.instance.topResView.icon_diamond, UIManager.instance.spriteFramesManager.diamonds, () => {
    //                 //播放钻石入库音效
    //             });
    //         }
    //         setTimeout(() => {
    //             Utils.PlayCoinsFlySound(3);
    //         }, 1000);
    //     }
    AniUtil.aniWillShow = function (node) {
        node.opacity = 0;
        node.scale = 0.7;
    };
    AniUtil.aniShow = function (node, next) {
        node.stopAllActions();
        node.scale = 0.3;
        cc.tween(node).to(0.3, { opacity: 255, scale: 1 }, { easing: cc.easing.backOut })
            .call(function () {
            next && next();
        })
            .start();
    };
    AniUtil.aniHide = function (node, next) {
        node.stopAllActions();
        cc.tween(node).to(0.3, { opacity: 0, scale: 0.3 }, { easing: cc.easing.sineOut })
            .call(function () {
            next && next();
        })
            .start();
    };
    AniUtil.aniShaking = function (node, isReprat) {
        if (isReprat === void 0) { isReprat = true; }
        node.stopAllActions();
        node.angle = 0;
        if (isReprat) {
            cc.tween(node)
                .repeatForever(cc.tween(node)
                .to(0.1, { angle: -8 }, { easing: cc.easing.sineOut })
                .to(0.1, { angle: 5 }, { easing: cc.easing.sineOut })
                .to(0.1, { angle: -3 }, { easing: cc.easing.sineOut })
                .to(0.1, { angle: 1.5 }, { easing: cc.easing.sineOut })
                .to(0.1, { angle: 0 }, { easing: cc.easing.sineOut })
                .delay(0.5))
                .start();
        }
        else {
            cc.tween(node)
                .to(0.1, { angle: -8 }, { easing: cc.easing.sineOut })
                .to(0.1, { angle: 5 }, { easing: cc.easing.sineOut })
                .to(0.1, { angle: -3 }, { easing: cc.easing.sineOut })
                .to(0.1, { angle: 1.5 }, { easing: cc.easing.sineOut })
                .to(0.1, { angle: 0 }, { easing: cc.easing.sineOut })
                .delay(0.5)
                .start();
        }
    };
    AniUtil.aniHeart = function (node, cyc, constant) {
        if (cyc === void 0) { cyc = 0.2; }
        node.stopAllActions();
        node.angle = 0;
        cc.tween(node)
            .repeatForever(cc.tween(node)
            .to(constant ? cyc : cyc / 2, { scale: 1.2 }, { easing: cc.easing.sineOut })
            .to(cyc, { scale: 1 }, { easing: cc.easing.sineOut })
            .delay(constant ? 0 : 0.5))
            .start();
    };
    AniUtil.aniHeartHappy = function (node) {
        node.stopAllActions();
        var by = node.y;
        var ty = node.y + 30;
        cc.tween(node)
            .repeatForever(cc.tween(node)
            .to(0.1, { scaleX: 1.1, scaleY: 0.8 }, { easing: cc.easing.sineOut })
            .to(0.1, { scaleX: 1, scaleY: 1, y: ty }, { easing: cc.easing.sineOut })
            .to(0.1, { scaleX: 1, scaleY: 1, y: by }, { easing: cc.easing.sineIn })
            .to(0.1, { scaleX: 1.1, scaleY: 0.8 }, { easing: cc.easing.sineOut })
            .to(0.1, { scaleX: 1, scaleY: 1 }, { easing: cc.easing.sineIn })
            .delay(0.2))
            .start();
    };
    AniUtil.aniDou = function (node, next) {
        cc.tween(node)
            .to(0.1, { scaleY: 1.4, scaleX: 0.7 }, { easing: cc.easing.sineOut })
            .to(0.05, { scaleY: 0.9, scaleX: 1.1 }, { easing: cc.easing.sineOut })
            .to(0.08, { scaleY: 1.1, scaleX: 0.9 }, { easing: cc.easing.sineOut })
            .to(0.08, { scaleY: 1, scaleX: 1 }, { easing: cc.easing.sineOut })
            .call(function () {
            next && next();
        })
            .start();
    };
    AniUtil.aniShakeHead = function (node, next) {
        cc.tween(node)
            .to(0.05, { x: -6 }, { easing: cc.easing.sineOut })
            .to(0.08, { x: 6 }, { easing: cc.easing.sineOut })
            .to(0.07, { x: -5 }, { easing: cc.easing.sineOut })
            .to(0.06, { x: 4 }, { easing: cc.easing.sineOut })
            .to(0.05, { x: -3 }, { easing: cc.easing.sineOut })
            .to(0.04, { x: 2 }, { easing: cc.easing.sineOut })
            .to(0.03, { x: -1 }, { easing: cc.easing.sineOut })
            .to(0.02, { x: 0 }, { easing: cc.easing.sineOut })
            .call(function () {
            next && next();
        })
            .start();
    };
    //上下浮动
    AniUtil.aniUpDown = function (node, time, y) {
        if (time === void 0) { time = 0.5; }
        if (y === void 0) { y = 20; }
        if (cc.isValid(node)) {
            node.stopAllActions();
            var pos = cc.v2(node.x, node.y);
            cc.tween(node)
                .repeatForever(cc.tween(node)
                .to(time, { y: pos.y + y })
                .to(time, { y: pos.y }))
                .start();
        }
    };
    //
    AniUtil.rotation = function (node, time) {
        if (time === void 0) { time = 0.5; }
        if (cc.isValid(node)) {
            node.stopAllActions();
            cc.tween(node)
                .repeatForever(cc.tween(node)
                .to(time, { angle: 360 })
                .to(0, { angle: 0 }))
                .start();
        }
    };
    return AniUtil;
}());
exports.AniUtil = AniUtil;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHQvdXRpbHMvQW5pVXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSw4REFBeUQ7QUFDekQsc0RBQThDO0FBQzlDLCtDQUE4QztBQUM5QyxpQ0FBZ0M7QUFFaEM7SUFBQTtJQTJTQSxDQUFDO0lBMVNpQixlQUFPLEdBQXJCLFVBQXNCLE1BQWUsRUFBRSxZQUFxQixFQUFFLEdBQWlCLEVBQUUsU0FBcUIsRUFBRSxPQUFtQixFQUFFLE9BQXdCLEVBQUUsR0FBYztRQUF2RyxvQkFBQSxFQUFBLFNBQWlCO1FBQUUsMEJBQUEsRUFBQSxhQUFxQjtRQUFFLHdCQUFBLEVBQUEsV0FBbUI7UUFBRSx3QkFBQSxFQUFBLGVBQXdCO1FBQ2pKLElBQUksWUFBWSxHQUFHLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdELElBQUksV0FBVyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFeEQsSUFBSSxNQUFNLEdBQUcsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxRQUFRLEdBQUcsV0FBVyxDQUFDO1FBQzlCLGNBQUUsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFdkIsSUFBSSxNQUFNLEdBQUcsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUQsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFFdkIsSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFD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QUMsSUFBSSxDQUFDO2lCQUNULEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztpQkFDMUIsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FDOUI7aUJBQ0EsS0FBSyxFQUFFLENBQUM7U0FDaEI7SUFDTCxDQUFDO0lBQ0QsRUFBRTtJQUNZLGdCQUFRLEdBQXRCLFVBQXVCLElBQWEsRUFBRSxJQUFrQjtRQUFsQixxQkFBQSxFQUFBLFVBQWtCO1FBQ3BELElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNsQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDdEIsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7aUJBQ1QsYUFBYSxDQUNWLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO2lCQUNULEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUM7aUJBQ3hCLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FDM0I7aUJBQ0EsS0FBSyxFQUFFLENBQUM7U0FDaEI7SUFDTCxDQUFDO0lBQ0wsY0FBQztBQUFELENBM1NBLEFBMlNDLElBQUE7QUEzU1ksMEJBQU8iLCJmaWxlIjoiIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3ByaXRlVG9Ib21lIGZyb20gXCIuLi9jb21tb24vZWZmZWN0L1Nwcml0ZVRvSG9tZVwiO1xuaW1wb3J0IHsgdWkgfSBmcm9tIFwiLi4vZ2FtZS9jb21tb24vVUlNYW5hZ2VyXCI7XG5pbXBvcnQgeyBHYW1lVXRpbHMgfSBmcm9tIFwiLi4vZ2FtZS9HYW1lVXRpbHNcIjtcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIEFuaVV0aWwge1xuICAgIHB1YmxpYyBzdGF0aWMgSnVtcFRvMihwbGF5ZXI6IGNjLk5vZGUsIHdQb3NPZlRhcmdldDogY2MuVmVjMiwgdG9wOiBudW1iZXIgPSAzMDAsIHNjYWxlRnJvbTogbnVtYmVyID0gMSwgc2NhbGVUbzogbnVtYmVyID0gMSwgZWZmYm9vbTogYm9vbGVhbiA9IGZhbHNlLCBlbmQ/OiBGdW5jdGlvbikge1xuICAgICAgICBsZXQgd1Bvc09mUGxheWVyID0gcGxheWVyLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjYy52MigwLCAwKSk7XG4gICAgICAgIGxldCB3UG9zT2ZTdGFydCA9IGNjLnYyKHdQb3NPZlBsYXllci54LCB3UG9zT2ZUYXJnZXQueSk7XG5cbiAgICAgICAgbGV0IHNraW5feCA9IG5ldyBjYy5Ob2RlKFwic2tpbl94XCIpO1xuICAgICAgICBza2luX3gucG9zaXRpb24gPSB3UG9zT2ZTdGFydDtcbiAgICAgICAgdWkuYWRkRWZmZWN0QVIoc2tpbl94KTtcblxuICAgICAgICBsZXQgc2tpbl95ID0gbmV3IGNjLk5vZGUoXCJza2luX3lcIik7XG4gICAgICAgIHNraW5feS5wb3NpdGlvbiA9IGNjLnYyKDAsIHdQb3NPZlBsYXllci55IC0gd1Bvc09mVGFyZ2V0LnkpO1xuICAgICAgICBza2luX3kucGFyZW50ID0gc2tpbl94O1xuXG4gICAgICAgIGxldCBjbG9uZUljb24gPSBjYy5pbnN0YW50aWF0ZShwbGF5ZXIpO1xuICAgICAgICBjbG9uZUljb24uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgY2xvbmVJY29uLnNjYWxlID0gc2NhbGVGcm9tO1xuICAgICAgICBjbG9uZUljb24ucG9zaXRpb24gPSBjYy52MigwLCAwKTtcbiAgICAgICAgY2xvbmVJY29uLnBhcmVudCA9IHNraW5feTtcblxuICAgICAgICBsZXQgc3RlcCA9IDM7XG4gICAgICAgIGxldCB0cnlSZW1vdmVDbG9uZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICgtLXN0ZXAgPD0gMCkge1xuICAgICAgICAgICAgICAgIGVuZCAmJiBlbmQoKTtcbiAgICAgICAgICAgICAgICBpZiAoZWZmYm9vbSkge1xuICAgICAgICAgICAgICAgICAgICBHYW1lVXRpbHMuYWRkRWZmQm9vbSh3UG9zT2ZUYXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBVdGlscy5yZW1vdmVOb2RlKHNraW5feCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdHggPSBza2luX3gueCArICh3UG9zT2ZUYXJnZXQueCAtIHdQb3NPZlN0YXJ0LngpO1xuICAgICAgICBsZXQgdHkgPSBza2luX3kueSA8IDAgPyB0b3AgOiBza2luX3kueSArIHRvcDsvL+i1t+eCueS9jee9ruS4jue7iOeCueS9jee9ruiwgemrmOiwgeS9jlxuXG4gICAgICAgIGNjLnR3ZWVuKHNraW5feCkudG8oMC41LCB7IHg6IHR4IH0pXG4gICAgICAgICAgICAuY2FsbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5UmVtb3ZlQ2xvbmUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhcnQoKTtcbiAgICAgICAgY2MudHdlZW4oc2tpbl95KVxuICAgICAgICAgICAgLnRvKDAuMjUsIHsgeTogdHkgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAudG8oMC4yNSwgeyB5OiAwIH0sIHsgZWFzaW5nOiBjYy5lYXNpbmcuc2luZUluIH0pXG4gICAgICAgICAgICAuY2FsbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5UmVtb3ZlQ2xvbmUoKTtcbiAgICAgICAgICAgIH0pLnN0YXJ0KCk7XG4gICAgICAgIGNjLnR3ZWVuKGNsb25lSWNvbilcbiAgICAgICAgICAgIC50bygwLjUsIHsgc2NhbGU6IHNjYWxlVG8gfSlcbiAgICAgICAgICAgIC8vIC50bygwLjMsIHsgc2NhbGU6IHNjYWxlRnJvbSB9KVxuICAgICAgICAgICAgLmNhbGwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeVJlbW92ZUNsb25lKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXJ0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBKdW1wVG8ocGxheWVyOiBjYy5Ob2RlLCB3UG9zT2ZUYXJnZXQ6IGNjLlZlYzIsIHNjYWxlOiBudW1iZXIgPSAxLCBzb3VuZEVmZmNldDogRnVuY3Rpb24sIGVhc2luZ0JhY2s6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBsZXQgd1Bvc09mUGxheWVyID0gcGxheWVyLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjYy52MigwLCAwKSk7XG4gICAgICAgIGxldCB3UG9zT2ZTdGFydCA9IGNjLnYyKHdQb3NPZlBsYXllci54LCB3UG9zT2ZUYXJnZXQueSk7XG5cbiAgICAgICAgbGV0IGNsb25lSWNvbiA9IGNjLmluc3RhbnRpYXRlKHBsYXllcik7XG4gICAgICAgIGNsb25lSWNvbi5wb3NpdGlvbiA9IGNjLnYyKDAsIHdQb3NPZlBsYXllci55IC0gd1Bvc09mVGFyZ2V0LnkpO1xuICAgICAgICBjbG9uZUljb24uc2NhbGUgPSBzY2FsZTtcbiAgICAgICAgbGV0IHNraW4gPSBuZXcgY2MuTm9kZShcInNraW5cIik7XG4gICAgICAgIHNraW4uYWRkQ2hpbGQoY2xvbmVJY29uKTtcbiAgICAgICAgc2tpbi5wb3NpdGlvbiA9IHdQb3NPZlN0YXJ0O1xuICAgICAgICB1aS5hZGRFZmZlY3RBUihza2luKTtcblxuICAgICAgICBsZXQgc3RlcCA9IDI7XG4gICAgICAgIGxldCB0cnlSZW1vdmVDbG9uZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICgtLXN0ZXAgPD0gMCkge1xuICAgICAgICAgICAgICAgIHNvdW5kRWZmY2V0ICYmIHNvdW5kRWZmY2V0KCk7XG4gICAgICAgICAgICAgICAgc2tpbi5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdHggPSBza2luLnggKyAod1Bvc09mVGFyZ2V0LnggLSB3UG9zT2ZTdGFydC54KTtcbiAgICAgICAgbGV0IHR5ID0gY2xvbmVJY29uLnkgPCAwID8gMzAwIDogY2xvbmVJY29uLnkgKyAzMDA7Ly/otbfngrnkvY3nva7kuI7nu4jngrnkvY3nva7osIHpq5josIHkvY5cbiAgICAgICAgY2MudHdlZW4oc2tpbikudG8oMC42LCB7IHg6IHR4IH0pXG4gICAgICAgICAgICAuY2FsbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5UmVtb3ZlQ2xvbmUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhcnQoKTtcbiAgICAgICAgaWYgKGVhc2luZ0JhY2spIHtcbiAgICAgICAgICAgIGNjLnR3ZWVuKGNsb25lSWNvbilcbiAgICAgICAgICAgICAgICAudG8oMC4zLCB7IHk6IHR5IH0sIHsgZWFzaW5nOiBjYy5lYXNpbmcuc2luZU91dCB9KVxuICAgICAgICAgICAgICAgIC50bygwLjMsIHsgeTogLTUwLCBzY2FsZTogMSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVJbiB9KVxuICAgICAgICAgICAgICAgIC50bygwLjIsIHsgeTogMTAsIHNjYWxlOiAxIH0sIHsgZWFzaW5nOiBjYy5lYXNpbmcuc2luZU91dCB9KVxuICAgICAgICAgICAgICAgIC50bygwLjE1LCB7IHk6IDAsIHNjYWxlOiAxIH0sIHsgZWFzaW5nOiBjYy5lYXNpbmcuc2luZU91dCB9KVxuICAgICAgICAgICAgICAgIC5jYWxsKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5UmVtb3ZlQ2xvbmUoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5zdGFydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2MudHdlZW4oY2xvbmVJY29uKVxuICAgICAgICAgICAgICAgIC50bygwLjMsIHsgeTogdHkgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAgICAgLnRvKDAuMywgeyB5OiAwLCBzY2FsZTogMSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVJbiB9KVxuICAgICAgICAgICAgICAgIC5jYWxsKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5UmVtb3ZlQ2xvbmUoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICog5pS26I636YeR5biB5oiW6ZK755+z55qE54m55pWIXG4gICAqIEBwYXJhbSBzcHJpdGVGcmFtZXMgXG4gICAqIEBwYXJhbSB0YXJnZXROb2RlIFxuICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUVmZmVjdFNwcml0ZUhvbWUoc3RhcnROb2RlOiBjYy5Ob2RlLCB0YXJnZXROb2RlOiBjYy5Ob2RlLCBzcHJpdGVGcmFtZXM6IEFycmF5PGNjLlNwcml0ZUZyYW1lPiwgY2FsbGJhY2s6IEZ1bmN0aW9uLCBudW06IG51bWJlciA9IDUsIHNjYWxlOiBudW1iZXIgPSAxKSB7XG4gICAgICAgIGxldCBlZmZOdW0gPSBudW0vL1V0aWxzLnJhbmRvbUludChudW0sIG51bSAqIDIpO1xuICAgICAgICBsZXQgc3RhcnRCYXR0bGVXb3JsZFBvcyA9IHN0YXJ0Tm9kZS5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoY2MudjIoMCwgMCkpO1xuICAgICAgICBsZXQgd29ybGRFbmRQb3MgPSB0YXJnZXROb2RlLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihuZXcgY2MuVmVjMigwLCAwKSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWZmTnVtOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB0aW1lID0gVXRpbHMucmFuZG9tSW50KDAsIDMwMCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBVdGlscy5yYW5kb21JbnQoMCwgc3ByaXRlRnJhbWVzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgbGV0IGZyYW1lID0gc3ByaXRlRnJhbWVzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBTcHJpdGVUb0hvbWUuY3JlYXRlKGZyYW1lLCBjYy52MihzdGFydEJhdHRsZVdvcmxkUG9zLngsIHN0YXJ0QmF0dGxlV29ybGRQb3MueSksIHdvcmxkRW5kUG9zLCBmYWxzZSwgY2FsbGJhY2ssIHNjYWxlKTtcbiAgICAgICAgICAgIH0sIHRpbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIC8qKlxuICAgIC8vICAqIOWFpeW6k+eahOmHkeW4gVxuICAgIC8vICAqIEBwYXJhbSBzdGFydE5vZGUg6LW35aeL54K5XG4gICAgLy8gICovXG4gICAgLy8gcHVibGljIHN0YXRpYyBlZmZlY3RDb2xsZWN0Q29pbnMoc3RhcnROb2RlOiBjYy5Ob2RlLHRhcmdldE5vZGU6Y2MuTm9kZSkge1xuICAgIC8vICAgICBpZiAoIXN0YXJ0Tm9kZSkge1xuICAgIC8vICAgICAgICAgLy8gc3RhcnROb2RlID0gbmV3IGNjLk5vZGUoKTtcbiAgICAvLyAgICAgICAgIC8vIHN0YXJ0Tm9kZS54ID0gMDtcbiAgICAvLyAgICAgICAgIC8vIHN0YXJ0Tm9kZS55ID0gMDtcbiAgICAvLyAgICAgICAgIC8vIHVpLm5vZGVfZWZmZWN0LmFkZENoaWxkKHN0YXJ0Tm9kZSk7XG4gICAgLy8gICAgICAgICAvLyB0aGlzLmNyZWF0ZUVmZmVjdFNwcml0ZUhvbWUoc3RhcnROb2RlLCBVSU1hbmFnZXIuaW5zdGFuY2UudG9wUmVzVmlldy5pY29uX2NvaW4sIFVJTWFuYWdlci5pbnN0YW5jZS5zcHJpdGVGcmFtZXNNYW5hZ2VyLmNvaW5zLCAoKSA9PiB7XG5cbiAgICAvLyAgICAgICAgIC8vIH0pO1xuICAgIC8vICAgICAgICAgLy8gc3RhcnROb2RlLnJlbW92ZUZyb21QYXJlbnQoKTtcbiAgICAvLyAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgIFxuXG4gICAgLy8gICAgICAgICBsZXQgZnJhbWVzID0gW3N0YXJ0Tm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZV07XG4gICAgLy8gICAgICAgICB0aGlzLmNyZWF0ZUVmZmVjdFNwcml0ZUhvbWUoc3RhcnROb2RlLCB0YXJnZXROb2RlLCBmcmFtZXMsICgpID0+IHtcbiAgICAvLyAgICAgICAgIH0pO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIC8vICAgICAgICAgVXRpbHMuUGxheUNvaW5zRmx5U291bmQoMyk7XG4gICAgLy8gICAgIH0sIDEwMDApO1xuICAgIC8vIH1cbiAgICAvLyAgICAgLyoqXG4gICAgLy8gICAgICAqIOWFpeW6k+eahOmSu+efs1xuICAgIC8vICAgICAgKiBAcGFyYW0gc3RhcnROb2RlIOi1t+Wni+eCuVxuICAgIC8vICAgICAgKi9cbiAgICAvLyAgICAgcHVibGljIHN0YXRpYyBlZmZlY3RDb2xsZWN0RGlhbW9uZChzdGFydE5vZGU6IGNjLk5vZGUpIHtcbiAgICAvLyAgICAgICAgIGlmICghc3RhcnROb2RlKSB7XG4gICAgLy8gICAgICAgICAgICAgc3RhcnROb2RlID0gbmV3IGNjLk5vZGUoKTtcbiAgICAvLyAgICAgICAgICAgICBzdGFydE5vZGUueCA9IDA7XG4gICAgLy8gICAgICAgICAgICAgc3RhcnROb2RlLnkgPSAwO1xuICAgIC8vICAgICAgICAgICAgIFVJTWFuYWdlci5pbnN0YW5jZS5ub2RlX2VmZmVjdC5hZGRDaGlsZChzdGFydE5vZGUpO1xuICAgIC8vICAgICAgICAgICAgIHRoaXMuY3JlYXRlRWZmZWN0U3ByaXRlSG9tZShzdGFydE5vZGUsIFVJTWFuYWdlci5pbnN0YW5jZS50b3BSZXNWaWV3Lmljb25fZGlhbW9uZCwgVUlNYW5hZ2VyLmluc3RhbmNlLnNwcml0ZUZyYW1lc01hbmFnZXIuZGlhbW9uZHMsICgpID0+IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgLy/mkq3mlL7pkrvnn7PlhaXlupPpn7PmlYhcbiAgICAvLyAgICAgICAgICAgICB9KTtcbiAgICAvLyAgICAgICAgICAgICBzdGFydE5vZGUucmVtb3ZlRnJvbVBhcmVudCgpO1xuICAgIC8vICAgICAgICAgfSBlbHNlIHtcbiAgICAvLyAgICAgICAgICAgICB0aGlzLmNyZWF0ZUVmZmVjdFNwcml0ZUhvbWUoc3RhcnROb2RlLCBVSU1hbmFnZXIuaW5zdGFuY2UudG9wUmVzVmlldy5pY29uX2RpYW1vbmQsIFVJTWFuYWdlci5pbnN0YW5jZS5zcHJpdGVGcmFtZXNNYW5hZ2VyLmRpYW1vbmRzLCAoKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgICAgIC8v5pKt5pS+6ZK755+z5YWl5bqT6Z+z5pWIXG4gICAgLy8gICAgICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAvLyAgICAgICAgICAgICBVdGlscy5QbGF5Q29pbnNGbHlTb3VuZCgzKTtcbiAgICAvLyAgICAgICAgIH0sIDEwMDApO1xuICAgIC8vICAgICB9XG4gICAgcHVibGljIHN0YXRpYyBhbmlXaWxsU2hvdyhub2RlOiBjYy5Ob2RlKSB7XG4gICAgICAgIG5vZGUub3BhY2l0eSA9IDA7XG4gICAgICAgIG5vZGUuc2NhbGUgPSAwLjc7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgYW5pU2hvdyhub2RlOiBjYy5Ob2RlLCBuZXh0PzogRnVuY3Rpb24pIHtcbiAgICAgICAgbm9kZS5zdG9wQWxsQWN0aW9ucygpO1xuICAgICAgICBub2RlLnNjYWxlID0gMC4zO1xuICAgICAgICBjYy50d2Vlbihub2RlKS50bygwLjMsIHsgb3BhY2l0eTogMjU1LCBzY2FsZTogMSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLmJhY2tPdXQgfSlcbiAgICAgICAgICAgIC5jYWxsKCgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXh0ICYmIG5leHQoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhcnQoKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBhbmlIaWRlKG5vZGU6IGNjLk5vZGUsIG5leHQ/OiBGdW5jdGlvbikge1xuICAgICAgICBub2RlLnN0b3BBbGxBY3Rpb25zKCk7XG4gICAgICAgIGNjLnR3ZWVuKG5vZGUpLnRvKDAuMywgeyBvcGFjaXR5OiAwLCBzY2FsZTogMC4zIH0sIHsgZWFzaW5nOiBjYy5lYXNpbmcuc2luZU91dCB9KVxuICAgICAgICAgICAgLmNhbGwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5leHQgJiYgbmV4dCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGFydCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYW5pU2hha2luZyhub2RlOiBjYy5Ob2RlLCBpc1JlcHJhdCA9IHRydWUpIHtcbiAgICAgICAgbm9kZS5zdG9wQWxsQWN0aW9ucygpO1xuICAgICAgICBub2RlLmFuZ2xlID0gMDtcbiAgICAgICAgaWYgKGlzUmVwcmF0KSB7XG5cbiAgICAgICAgICAgIGNjLnR3ZWVuKG5vZGUpXG4gICAgICAgICAgICAgICAgLnJlcGVhdEZvcmV2ZXIoXG4gICAgICAgICAgICAgICAgICAgIGNjLnR3ZWVuKG5vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAudG8oMC4xLCB7IGFuZ2xlOiAtOCB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50bygwLjEsIHsgYW5nbGU6IDUgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudG8oMC4xLCB7IGFuZ2xlOiAtMyB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50bygwLjEsIHsgYW5nbGU6IDEuNSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50bygwLjEsIHsgYW5nbGU6IDAgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGVsYXkoMC41KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuc3RhcnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNjLnR3ZWVuKG5vZGUpXG4gICAgICAgICAgICAgICAgLnRvKDAuMSwgeyBhbmdsZTogLTggfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAgICAgLnRvKDAuMSwgeyBhbmdsZTogNSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgICAgICAudG8oMC4xLCB7IGFuZ2xlOiAtMyB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgICAgICAudG8oMC4xLCB7IGFuZ2xlOiAxLjUgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAgICAgLnRvKDAuMSwgeyBhbmdsZTogMCB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgICAgICAuZGVsYXkoMC41KVxuICAgICAgICAgICAgICAgIC5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgYW5pSGVhcnQobm9kZTogY2MuTm9kZSwgY3ljOiBudW1iZXIgPSAwLjIsIGNvbnN0YW50PzogYm9vbGVhbikge1xuICAgICAgICBub2RlLnN0b3BBbGxBY3Rpb25zKCk7XG4gICAgICAgIG5vZGUuYW5nbGUgPSAwO1xuICAgICAgICBjYy50d2Vlbihub2RlKVxuICAgICAgICAgICAgLnJlcGVhdEZvcmV2ZXIoXG4gICAgICAgICAgICAgICAgY2MudHdlZW4obm9kZSlcbiAgICAgICAgICAgICAgICAgICAgLnRvKGNvbnN0YW50ID8gY3ljIDogY3ljIC8gMiwgeyBzY2FsZTogMS4yIH0sIHsgZWFzaW5nOiBjYy5lYXNpbmcuc2luZU91dCB9KVxuICAgICAgICAgICAgICAgICAgICAudG8oY3ljLCB7IHNjYWxlOiAxIH0sIHsgZWFzaW5nOiBjYy5lYXNpbmcuc2luZU91dCB9KVxuICAgICAgICAgICAgICAgICAgICAuZGVsYXkoY29uc3RhbnQgPyAwIDogMC41KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnN0YXJ0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBhbmlIZWFydEhhcHB5KG5vZGU6IGNjLk5vZGUpIHtcbiAgICAgICAgbm9kZS5zdG9wQWxsQWN0aW9ucygpO1xuICAgICAgICBsZXQgYnkgPSBub2RlLnk7XG4gICAgICAgIGxldCB0eSA9IG5vZGUueSArIDMwO1xuICAgICAgICBjYy50d2Vlbihub2RlKVxuICAgICAgICAgICAgLnJlcGVhdEZvcmV2ZXIoXG4gICAgICAgICAgICAgICAgY2MudHdlZW4obm9kZSlcbiAgICAgICAgICAgICAgICAgICAgLnRvKDAuMSwgeyBzY2FsZVg6IDEuMSwgc2NhbGVZOiAwLjggfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAgICAgICAgIC50bygwLjEsIHsgc2NhbGVYOiAxLCBzY2FsZVk6IDEsIHk6IHR5IH0sIHsgZWFzaW5nOiBjYy5lYXNpbmcuc2luZU91dCB9KVxuICAgICAgICAgICAgICAgICAgICAudG8oMC4xLCB7IHNjYWxlWDogMSwgc2NhbGVZOiAxLCB5OiBieSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVJbiB9KVxuICAgICAgICAgICAgICAgICAgICAudG8oMC4xLCB7IHNjYWxlWDogMS4xLCBzY2FsZVk6IDAuOCB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRvKDAuMSwgeyBzY2FsZVg6IDEsIHNjYWxlWTogMSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVJbiB9KVxuICAgICAgICAgICAgICAgICAgICAuZGVsYXkoMC4yKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnN0YXJ0KCk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgYW5pRG91KG5vZGU6IGNjLk5vZGUsIG5leHQ/OiBGdW5jdGlvbikge1xuICAgICAgICBjYy50d2Vlbihub2RlKVxuICAgICAgICAgICAgLnRvKDAuMSwgeyBzY2FsZVk6IDEuNCwgc2NhbGVYOiAwLjcgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAudG8oMC4wNSwgeyBzY2FsZVk6IDAuOSwgc2NhbGVYOiAxLjEgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAudG8oMC4wOCwgeyBzY2FsZVk6IDEuMSwgc2NhbGVYOiAwLjkgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAudG8oMC4wOCwgeyBzY2FsZVk6IDEsIHNjYWxlWDogMSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgIC5jYWxsKCgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXh0ICYmIG5leHQoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhcnQoKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBhbmlTaGFrZUhlYWQobm9kZTogY2MuTm9kZSwgbmV4dD86IEZ1bmN0aW9uKSB7XG4gICAgICAgIGNjLnR3ZWVuKG5vZGUpXG4gICAgICAgICAgICAudG8oMC4wNSwgeyB4OiAtNiB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgIC50bygwLjA4LCB7IHg6IDYgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAudG8oMC4wNywgeyB4OiAtNSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgIC50bygwLjA2LCB7IHg6IDQgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAudG8oMC4wNSwgeyB4OiAtMyB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgIC50bygwLjA0LCB7IHg6IDIgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAudG8oMC4wMywgeyB4OiAtMSB9LCB7IGVhc2luZzogY2MuZWFzaW5nLnNpbmVPdXQgfSlcbiAgICAgICAgICAgIC50bygwLjAyLCB7IHg6IDAgfSwgeyBlYXNpbmc6IGNjLmVhc2luZy5zaW5lT3V0IH0pXG4gICAgICAgICAgICAuY2FsbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV4dCAmJiBuZXh0KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXJ0KCk7XG4gICAgfVxuXG4gICAgLy/kuIrkuIvmta7liqhcbiAgICBwdWJsaWMgc3RhdGljIGFuaVVwRG93bihub2RlOiBjYy5Ob2RlLCB0aW1lOiBudW1iZXIgPSAwLjUsIHk6IG51bWJlciA9IDIwKTogdm9pZCB7XG4gICAgICAgIGlmIChjYy5pc1ZhbGlkKG5vZGUpKSB7XG4gICAgICAgICAgICBub2RlLnN0b3BBbGxBY3Rpb25zKCk7XG4gICAgICAgICAgICBsZXQgcG9zID0gY2MudjIobm9kZS54LCBub2RlLnkpXG4gICAgICAgICAgICBjYy50d2Vlbihub2RlKVxuICAgICAgICAgICAgICAgIC5yZXBlYXRGb3JldmVyKFxuICAgICAgICAgICAgICAgICAgICBjYy50d2Vlbihub2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvKHRpbWUsIHsgeTogcG9zLnkgKyB5IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudG8odGltZSwgeyB5OiBwb3MueSB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvL1xuICAgIHB1YmxpYyBzdGF0aWMgcm90YXRpb24obm9kZTogY2MuTm9kZSwgdGltZTogbnVtYmVyID0gMC41KTogdm9pZCB7XG4gICAgICAgIGlmIChjYy5pc1ZhbGlkKG5vZGUpKSB7XG4gICAgICAgICAgICBub2RlLnN0b3BBbGxBY3Rpb25zKCk7XG4gICAgICAgICAgICBjYy50d2Vlbihub2RlKVxuICAgICAgICAgICAgICAgIC5yZXBlYXRGb3JldmVyKFxuICAgICAgICAgICAgICAgICAgICBjYy50d2Vlbihub2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvKHRpbWUsIHsgYW5nbGU6IDM2MCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvKDAsIHsgYW5nbGU6IDAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=
{"version":3,"sources":["assets/script/lang/LocalizedLabel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport * as i18n from './LanguageData';\n\n// import { _decorator, Component, Label, Font, RichText } from 'cc';\nconst {ccclass, property,executeInEditMode} = cc._decorator;\n// const { ccclass, property, executeInEditMode } = _decorator;\n\n@ccclass(\"LocalizedFontItem\")\nclass LocalizedFontItem {\n    @property(cc.String)\n    language: string = 'zh';\n\n    @property(cc.Font)\n    font: cc.Font | null = null;\n}\n\n@ccclass\n@executeInEditMode\nexport class LocalizedLabel extends cc.Component {\n    label: cc.Label | cc.RichText = null;\n\n    @property({ visible: true })\n    isRickText: boolean = false;\n\n    @property({ visible: false })\n    key: string = '';\n\n    @property({ displayName: 'Key', visible: true })\n    get _key() {\n        return this.key;\n    }\n    set _key(str: string) {\n        this.updateLabel();\n        this.key = str;\n    }\n\n    @property({type: LocalizedFontItem,serializable:false})\n    fontList:LocalizedFontItem[] = [];\n\n    // 多语言参数\n    public param:Array<any> = null;\n    onLoad() {\n        if (!i18n.ready) {\n            i18n.init('zh');\n        }\n        this.fetchRender();\n    }\n\n    fetchRender () {\n        let label = null;\n        if (this.isRickText) {\n            label = this.getComponent(cc.RichText);\n        } else {\n            label = this.getComponent(cc.Label);\n        }\n        \n        if (label) {\n            this.label = label;\n            this.updateLabel();\n            return;\n        } \n    }\n\n    updateLabel () {\n\n        for (let i = 0; i < this.fontList.length; i++) \n        {\n            const font = this.fontList[i];\n            if (font.language === i18n._language) {\n                if (this.label && font) \n                {\n                    this.label.font = font.font;    \n                }\n                break;\n            }\n        }\n        if (this.label) {\n            if (this.key) \n            {\n                this.label.string = i18n.t(this.key,this.param);\n            }\n        }\n        // this.label && (this.label.string = i18n.t(this.key));\n    }\n}\n"]}
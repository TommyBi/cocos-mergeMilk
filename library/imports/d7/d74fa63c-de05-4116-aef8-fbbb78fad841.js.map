{"version":3,"sources":["assets/script/game/ui/bl_ball.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { GlobalEvent } from \"../../common/Global\";\nimport { EventBallClick } from \"../../common/GlobalEvents\";\nimport { Utils } from \"../../utils/Utils\";\nimport { GameUtils } from \"../GameUtils\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class bl_ball extends cc.Component {\n\n    // LIFE-CYCLE CALLBACKS:\n\n    @property(cc.Node)\n    lb: cc.Node = null;\n    @property(sp.Skeleton)\n    eff: sp.Skeleton = null;\n    id: number;\n    rId: string;\n\n    THRESHOLD = 0.08;\n    rigidbody: cc.RigidBody;\n\n    isDestory: boolean = false;\n    isDrop = false;\n    onLoad() {\n        this.rigidbody = this.node.getComponent(cc.RigidBody);\n    }\n    start() {\n    }\n\n    update(dt) {\n        // if (this.isDrop && this.rigidbody) {\n        //     if (Math.abs(this.rigidbody.linearVelocity.x) < this.THRESHOLD && Math.abs(this.rigidbody.linearVelocity.y) < this.THRESHOLD) {\n        //         // 刚体几乎已经停止运动  \n        //         GameUtils.playDrop();\n        //         this.isDrop = false;\n        //     }\n        // }\n        this.lb.angle = -this.node.angle;\n    }\n\n    onClick() {\n        if (Utils.btnLock()) {\n            return;\n        }\n        // GameUtils.playSoundBtnClicked();\n        GlobalEvent.dispatchEvent(new EventBallClick(this.id, this.rId));\n    }\n\n    init(id, isDrop) {\n        this.isDrop = isDrop;\n        this.id = id;\n        this.rId = Utils.nextRandomId();\n    }\n\n    playHide(callBack) {\n        this.eff.node.active = true;\n        GameUtils.playCompose();\n        cc.tween(this.node).delay(0).to(.1, { scale: 1.3 }).to(.1, { scale: 0 }).call(() => {\n            if (callBack) callBack();\n            this.delete();\n        }).start();\n    }\n    playShow() {\n        // this.node.active = true;\n        cc.tween(this.node).to(.1, { scale: 1 }).start();\n    }\n\n    removeRigidbody() {\n        this.node.removeComponent(cc.RigidBody);\n    }\n\n    protected onDestroy(): void {\n\n    }\n\n    delete() {\n        this.isDestory = true;\n        this.node.destroy();\n    }\n}\n"]}